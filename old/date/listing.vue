<template>
	<section id="events" class="frame mt-[100vh]">
		<nav class="full-nav">
			<h2>Events</h2>
			<div class="events-nav">
				<div class="all">VIEW ALL<br>EVENTS</div>
				<div class="liveset">LIVE<br> SET</div>
				<div class="exhibition">INSTALLATION<br>/ EXHIBITION  </div>
				<div class="collaboration">COLLABORATION<br>/ OTHER</div>
				<div class="booking">BOOKING</div>
			</div>
		</nav>
		<div>
			<article>
				<div class="curtain"></div>
				<div class="date">2022 NOV. 26</div>
				<div class="city">SAINT-JULIA <div class="country">&nbsp;FR&nbsp;</div></div>
				<div class="venue">Cyclic Law 20th Anniversary<br>@ Château H</div>
				<div class="info">+&nbsp;Common&nbsp;Eider,&nbsp;King&nbsp;Eider +&nbsp;Ascending&nbsp;Divers +&nbsp;Den&nbsp;Sorte&nbsp;Død +&nbsp;Curse&nbsp;All&nbsp;Kings</div>
			</article>
			<article class="past">
				<div class="curtain"></div>
				<div class="date">2022 OCT. 29</div>
				<div class="city">SARE <div class="country">&nbsp;FR&nbsp;</div></div>
				<div class="venue">☽ MAPA GALDUAK Festival ☾<br>@ Usopop</div>
				<div class="info"></div>
			</article>
			<article class="past">
				<div class="curtain"></div>
				<div class="date">2021 DEC. 04</div>
				<div class="city">BESANÇON <div class="country">&nbsp;FR&nbsp;</div></div>
				<div class="venue">Hands In The Dark Festival<br>@ Bains Douches Battant</div>
				<div class="info"></div>
			</article>
			<article class="past">
				<div class="curtain"></div>
				<div class="date">2021 OCT. 22</div>
				<div class="city">GRENOBLE <div class="country">&nbsp;FR&nbsp;</div></div>
				<div class="venue">@ L'Ampérage</div>
				<div class="info">+ UBV76</div>
			</article>
			<article class="past">
				<div class="curtain"></div>
				<div class="date">2021 OCT. 14</div>
				<div class="city">TOULOUSE <div class="country">&nbsp;FR&nbsp;</div></div>
				<div class="venue">Dans le Noir<br>@ Dada</div>
				<div class="info">+ Ascending Divers</div>
			</article>
			<article class="past">
				<div class="curtain"></div>
				<div class="date">2021 AUG. 07</div>
				<div class="city">DIJON <div class="country">&nbsp;FR&nbsp;</div></div>
				<div class="venue">Festival MV<br>@ Église Saint-Philibert</div>
				<div class="info">+ Hands In The Dark (Mix)</div>
			</article>
			<article class="past">
				<div class="curtain"></div>
				<div class="date">2021 JUL. 09</div>
				<div class="city">GIGORS &amp; LOZERON<div class="country">&nbsp;FR&nbsp;</div></div>
				<div class="venue">@ La Sye Electric</div>
				<div class="info">+ Hands In The Dark (Mix)</div>
			</article>
			<article class="past">
			<div class="curtain"></div>
			<div class="date">2021 APR. 17
				<div class="exhibition"></div>
				<div class="collaboration"></div>
			</div>
			<div class="city">LUXEMBOURG <div class="country">&nbsp;LU&nbsp;</div></div>
			<div class="venue">«&nbsp;L’Homme&nbsp;Gris&nbsp;» raconte<br>@ Casino Luxembourg</div>
			<div class="info">« Secret Hell » in situ listening experience, part of «&nbsp;L’Homme&nbsp;Gris&nbsp;» exhibition curated by Benjamin Bianciotto. Collaborative installation with Élodie&nbsp;Lesourd
			+&nbsp;Stephen&nbsp;O'&nbsp;Malley +&nbsp;Aaron&nbsp;Turner +&nbsp;Saåad +&nbsp;Marnie&nbsp;Weber +&nbsp;Julien&nbsp;Langendorff &amp;&nbsp;Lori&nbsp;Sean&nbsp;Berg +&nbsp;Sindre&nbsp;Foss&nbsp;Skancke +&nbsp;NVK +&nbsp;Cigvë +&nbsp;Neuromancienne +&nbsp;Édouard&nbsp;S.&nbsp;Lamothe</div>
			</article>
			<article class="past">
			<div class="curtain"></div>
			<div class="date">2021 FEB. 15<br>
				&gt; MAR. 26
				<div class="exhibition"></div>
				<div class="collaboration"></div>
			</div>
			<div class="city">ANTANANARIVO <div class="country">&nbsp;MG&nbsp;</div></div>
			<div class="venue">Christian Sanna's «Chère Embona» exhibition<br>@ Fondation H</div>
			<div class="info">Notes For Embona audio &amp; video installation in collaboration with Christian Sanna</div>
			</article>
			<article class="past">
			<div class="curtain"></div>
			<div class="date">2019 DEC. 15
			</div>
			<div class="city">LA CHAISE-DIEU <div class="country">&nbsp;FR&nbsp;</div></div>
			<div class="venue">@ Amphithéâtre Cziffra</div>
			<div class="info">Sphinx Original Soundtrack (Live)
			+&nbsp;Stéphane&nbsp;Fuget,&nbsp;Les&nbsp;Épopées &amp;&nbsp;Tito&nbsp;González&nbsp;García</div>
			</article>
			<article class="past">
			<div class="curtain"></div>
			<div class="date">2020 DEC. 02 &gt;<br> 2021 JAN. 23
				<div class="exhibition"></div>
				<div class="collaboration"></div>
			</div>
			<div class="city">PARIS <div class="country">&nbsp;FR&nbsp;</div></div>
			<div class="venue">Christian Sanna's «Chère Embona» exhibition<br>@ Fondation H</div>
			<div class="info">Notes For Embona audio &amp; video installation in collaboration with Christian Sanna</div>
			</article>
			<article class="past">
			<div class="curtain"></div>
			<div class="date">2020 SEP. 11 &gt;<br> SEP. 12
				<div class="exhibition"></div>
			</div>
			<div class="city">TOULOUSE <div class="country">&nbsp;FR&nbsp;</div></div>
			<div class="venue">Les Journées du Patrimoine<br>@ Le Metronum</div>
			<div class="info">«Prepared Oasis» Multi channels audio &amp; video installation </div>
			</article>
			<article class="past">
			<div class="curtain"></div>
			<div class="date">2018 NOV. 15
			</div>
			<div class="city">BREST <div class="country">&nbsp;FR&nbsp;</div></div>
			<div class="venue">Festival Invisible<br>@ Passerelle Centre d'Art Contemporain</div>
			<div class="info">+ Thomas Poli</div>	
			</article>
			<article class="past">
			<div class="curtain"></div>
			<div class="date">2018 NOV. 01
			</div>
			<div class="city">NANTES <div class="country">&nbsp;FR&nbsp;</div></div>
			<div class="venue">Soy Festival<br>@ Muséum d'Histoire Naturelle</div>
			<div class="info">+ Anne Müller</div>	
			</article>
			<article class="past">
			<div class="curtain"></div>
			<div class="date">2018 OCT. 31
			</div>
			<div class="city">RENNES <div class="country">&nbsp;FR&nbsp;</div></div>
			<div class="venue">@ Le Terminus</div>
			<div class="info">+&nbsp;Partout&nbsp;Partout +&nbsp;Descendeur</div>	
			</article>
			<article class="past">
			<div class="curtain"></div>
			<div class="date">2018 SEP. 21
				<div class="collaboration"></div>		</div>
			<div class="city">TOULOUSE <div class="country">&nbsp;FR&nbsp;</div></div>
			<div class="venue">Le Printemps de Septembre <br>@ Lieu-Commun</div>
			<div class="info">"Diminished Finlucier" a live performance with Élodie&nbsp;Lesourd, Romain Barbot &amp; Benjamin&nbsp;Bianciotto</div>	
			</article>
		</div>
	</section>
</template>
<style lang="postcss">

.events-nav { @apply flex w-3/4 float-right justify-between; }
.liveset, .exhibition, .collaboration {@apply opacity-30 duration-1000;}
.liveset:hover, .exhibition:hover, .collaboration:hover {@apply cursor-pointer duration-1000 opacity-100;}
.all:hover, .booking:hover {@apply cursor-pointer duration-1000 opacity-100;}
.liveset:before, .exhibition:before, .collaboration:before
 {
	font-size: 130%;
	display: flex;
	font-weight: 700;
	padding: 0;
	float: left;
	width: 1.8em; 
	height: 1.8em;
	margin: 0em .5em 0 0;
	justify-content: center;
	align-items: center;
	border-radius: 50%;
	z-index: 1;
}
.liveset:before {content: "–"; 	background-color: var(--prim);	color: var(--snd); }
.exhibition:before {content: "Ø"; 	background-color: var(--snd);	color: var(--prim); }
.collaboration:before {content: "∫∫∫"; 	background-color: var(--snd);	color: var(--prim); }

.booking {
	padding: 1em;
	border: 1px solid var(--snd);
	transition: .5s;
}
.booking:hover {
	background-color: var(--snd);
	color: var(--prim);
	transition: 1s;
}
article .exhibition, article .collaboration {font-size: 60%; opacity: 1; margin-top: .5em; }
article .exhibition:before, article .collaboration:before {color: var(--snd); background-color: var(--prim); border: 1px solid var(--snd);}


#events {
	font-size: 10px;
	position: relative;
	padding: 1em 0;
}

#events article {
	overflow: hidden;
	height: inherit;
	display: flex;
	width:100%;
	align-content: left;
    padding: var(--m1) 0;
	transition: 1s;
	border-bottom: 1px dotted var(--prim);
	border-top: 1px dotted var(--prim);
}

#events article:hover {
	transition: 1s;
	padding: calc(var(--m1) * 3) 0;
	border-bottom: 1px dotted var(--snd);
	border-top: 1px dotted var(--snd);
	cursor: var(--cursor);
}

#events .date, #events .country, 
#events .city, #events .venue, 
#events .info  {
		height: inherit;
		padding: 0.2em;
		line-height: 100%;
}
#events .date {
	font-size: 1.5em;
	width: 12%;
}


#events .city:before {
	content: " | ";
	padding-right: 1em;
}
#events .city {
	font-size: 1.8em;
	width: 33%;
	display: flex;
	align-items: top;
}

#events .country {
	font-size: 50% !important;
}
#events .country:before {
	margin-left: 1em;
	content: "(";
}
#events .country:after {
	content:")";
}
#events .venue {
	font-size: 1.3em;
	width: 30%;
	text-transform: uppercase;
	line-height: 1.3em;
}
#events .info {
	font-size: 1.2em;
	width: 25%;
	text-align: right;
	padding-right: 0%;
	line-height: 1.2em;
}


#events .curtain {
	position: absolute;
	content: " ";
	z-index: 99;
	background-color: var(--prim);
	animation: event-curtain 1s;
	animation-fill-mode: forwards;
	animation-timing-function: ease-in-out;
}
  .past, .past:hover {transition: opacity 1s;}
  .past {opacity: 0.3}
  .past:hover {opacity: 1}




</style>
<script>
export default {
	methods: {
		scrollAnimation() {
			this.$gsap.utils.toArray("article").forEach(e => {
				var curtain = e.getElementsByClassName('curtain');
				var curtainEvent = this.$gsap.from(curtain, {width: '100%' , height: '100%' , duration: 0.5, ease:"power2.inOut", stagger: 0.1}, "+=0");
				
			this.$gsap.timeline({
				scrollTrigger: {
						trigger: e,
						start: "center bottom",
						end: "center top",
						scrub: false,
						toggleActions: "play reverse play reverse",
						onEnterBack: e => {
							curtainEvent.play();
						},
						onLeaveBack: e => {
							curtainEvent.reverse();
						},
						onEnter: e => {
							curtainEvent.play();
						},
						onLeave: e => {
							curtainEvent.reverse();
						},
				}
				}).fromTo(e, {  y: 0, opacity: 1, ease: "power2.inOut"}, {  y: 0, opacity: 1, ease: "power2.inOut"});
			});
		}
	},
	mounted() {
		this.scrollAnimation();
		window.addEventListener('resize', this.scrollAnimation)
		if(this.$store.state.preloading === false) {
		//console.log("Page not loaded")
		} else {
		//console.log("Page loaded")
		}
	}
}
</script>
