<template>
  <section id="works" >
    <div class="disco-works">
      <header class="works-head sticky top-0">
			  <h2>Discography</h2>
		  </header>
      <div class="full-disco">
        <article data-year="2023">
          <div class="curtain"></div>
          <div class="year">2023</div>
          <div class="title">tba</div>
          <div class="info">[album]</div>
          <div class="label">tba</div>
          <div class="format">vinyl / digital</div>
          <svg height="50" width="100vw" class="pixelateMin">
            <line x1="0" y1="24" x2="100%" y2="26" style="stroke:rgb(255,255,255)!important;" />
          </svg>

        </article>
        <article data-year="2021">
          <div class="curtain"></div>
          <div class="year">2021</div>
          <div class="title">мреть (наутро ночь)<em> <small>as</small> Saáadon</em></div>
          <div class="info">[album]</div>
          <div class="label">Cyclic Law</div>
          <div class="format">vinyl / CD / digital</div>
          <svg height="50" width="100vw" class="pixelateMin">
            <line x1="0" y1="24" x2="100%" y2="26"/>
          </svg>
        </article>
        <article data-year="2021">
          <div class="curtain"></div>
          <div class="year">2021</div>
          <div class="title">Secret Hell</div>
          <div class="info">[v/a "L'Homme Gris"]</div>
          <div class="label">Casino Luxembourg</div>
          <div class="format">compilation / cassette</div>
          <svg height="50" width="100vw" class="pixelateMin">
            <line x1="0" y1="24" x2="100%" y2="26"/>
          </svg>
        </article>
        <article data-year="2020">
          <div class="curtain"></div>
          <div class="year">2020</div>
          <div class="title">Prepared Oasis</div>
          <div class="info">[single]</div>
          <div class="label">/</div>
          <div class="format">digital</div>
          <svg height="50" width="100vw" class="pixelateMin">
            <line x1="0" y1="24" x2="100%" y2="26"/>
          </svg>
        </article>
      </div>
    </div>
    <div class="ost-works">
      <header class="works-head">
			  <h2>Original Soundtracks</h2>
		  </header>
      <div class="full-ost">
        <article data-year="2022">
          <div class="curtain"></div>
          <div class="year">2022</div>
          <div class="title">Topos<em> <small>by</small> Max Bondendorf</em></div>
          <div class="label">/</div>
          <svg height="50" width="100vw">
            <line x1="0" y1="24" x2="100%" y2="26" style="stroke:rgb(255,255,255)!important;" />
          </svg>
        </article>
        <article data-year="2021">
          <div class="curtain"></div>
          <div class="year">2021</div>
          <div class="title">A-HORA<em> <small>by</small> Klara Ravat</em></div>
          <div class="label">Klankvorm</div>
          <svg height="50" width="100vw">
            <line x1="0" y1="24" x2="100%" y2="26" style="stroke:rgb(255,255,255)!important;" />
          </svg>
        </article>
        <article data-year="2019">
          <div class="curtain"></div>
          <div class="year">2019</div>
          <div class="title">Sphinx<em> <small>by</small> Tito Gonzalez Garcia</em></div>
          <div class="label">Tamara Films</div>
          <svg height="50" width="100vw">
            <line x1="0" y1="24" x2="100%" y2="26" style="stroke:rgb(255,255,255)!important;" />
          </svg>
        </article>
        <article data-year="2019">
          <div class="curtain"></div>
          <div class="year">2019</div>
          <div class="title">Les Oracles<em> <small>by</small> Tito Gonzalez Garcia</em></div>
          <div class="label">Tamara Films</div>
          <svg height="50" width="100vw">
            <line x1="0" y1="24" x2="100%" y2="26" style="stroke:rgb(255,255,255)!important;" />
          </svg>
        </article>
        <article data-year="2016">
          <div class="curtain"></div>
          <div class="year">2016</div>
          <div class="title">Elijah<em> <small>by</small> Fanny Béguély</em></div>
          <div class="label">ESAV</div>
          <svg height="50" width="100vw">
            <line x1="0" y1="24" x2="100%" y2="26" style="stroke:rgb(255,255,255)!important;" />
          </svg>
        </article>
        <article data-year="2015">
          <div class="curtain"></div>
          <div class="year">2015</div>
          <div class="title">Tattoo<em> <small>by</small> Frédéric Jolivet</em></div>
          <div class="label">Monsieur Linéa</div>
          <svg height="50" width="100vw">
            <line x1="0" y1="24" x2="100%" y2="26" style="stroke:rgb(255,255,255)!important;" />
          </svg>
        </article>
      </div>
    </div>
    <div class="st-works">
      <header class="works-head">
			  <h2>Soundtracks</h2>
		  </header>
      <div class="full-ost">
        <article data-year="2021">
          <div class="curtain"></div>
          <div class="year">2021</div>
          <div class="title">Brigidy Bram: The Kendal Hanna Story<em> <small>by</small> Laura Gamse & Toby Lunn</em></div>
          <div class="label">Daydream Reels</div>
          <svg height="50" width="100vw">
            <line x1="0" y1="24" x2="100%" y2="26" style="stroke:rgb(255,255,255)!important;" />
          </svg>
        </article>
        <article data-year="2014">
          <div class="curtain"></div>
          <div class="year">2014</div>
          <div class="title">We Must Remain The Wildhearted Outsiders<em> <small>by</small> Chase Lisbon</em></div>
          <div class="label">Monolake Media</div>
          <svg height="50" width="100vw">
            <line x1="0" y1="24" x2="100%" y2="26" style="stroke:rgb(255,255,255)!important;" />
          </svg>
        </article>
      </div>
    </div>
    <div class="appear-works">
      <header class="works-head sticky top-0">
			  <h2>Appearances & Remixes</h2>
		  </header>
      <div class="full-disco">
        <article data-year="2020">
          <div class="curtain"></div>
          <div class="year">2020</div>
          <div class="title">Dome feat. Saåad<em> <small>as</small> Sádon</em></div>
          <div class="info">[v/a "Memories of a Lost City"]</div>
          <div class="label">Tokyo Jupiter</div>
          <div class="format">compilation / digital</div>
          <svg height="50" width="100vw" class="pixelateMin">
            <line x1="0" y1="24" x2="100%" y2="26"/>
          </svg>
        </article>
      </div>
    </div>
  </section>
</template>
<style lang="postcss">

  #works { @apply text-xs relative text-white; }

  .works-head { @apply h-[100px] bg-black flex items-center justify-between z-10;}
  .works-head h2 { @apply italic text-6xl font-meno font-light mr-8 inline z-10; }
   #works small { @apply text-sm ml-2 text-gray-600 italic; }

  .full-disco { @apply flex flex-col mb-20; }
  .full-disco .curtain { @apply w-full h-full absolute z-40 bg-black;}
  .full-disco article { @apply flex h-[50px] overflow-hidden justify-between items-center duration-500 transition-all}
  .full-disco article:hover { @apply border-white duration-1000  transition-all; }
  .full-disco article svg { @apply absolute w-full h-[50px] duration-500 transition-all z-0; }
  .full-disco article svg line{ @apply stroke-1 stroke-current text-white duration-500 transition-all; }
  .full-disco article:hover svg line{ @apply text-gray-700; }
  .full-disco article .year, .full-disco article .title, .full-disco article .info, .full-disco article .label, .full-disco article .format{ @apply z-[1] bg-black duration-500 transition-all text-gray-600 font-work cursor-crosshair; } 
  .full-disco article:hover .year, .full-disco article:hover .info, .full-disco article:hover .format { @apply text-white; } 
  .full-disco article .year{ @apply pr-2; } 
  .full-disco article .title{ @apply text-xl text-white p-4; } 
  .full-disco article .info{ @apply p-2; } 
  .full-disco article .label{ @apply text-sm italic text-white p-2; }
  .full-disco article .format{ @apply pl-2; }
  .full-disco article:hover .title {@apply px-8;} 
  .full-disco article:hover .label {@apply px-4;} 

  .full-ost { @apply flex flex-col mb-20; }
  .full-ost .curtain { @apply w-full h-full absolute z-40 bg-black;}
  .full-ost article { @apply flex h-[50px] overflow-hidden justify-between items-center duration-500 transition-all}
  .full-ost article:hover { @apply border-white duration-1000  transition-all; }
  .full-ost article svg { @apply absolute w-full h-[50px] duration-500 transition-all z-0; }
  .full-ost article svg line{ @apply stroke-1 stroke-current text-white duration-500 transition-all; }
  .full-ost article:hover svg line{ @apply text-gray-700; }
  .full-ost article .year, .full-ost article .title, .full-ost article .label { @apply z-[1] bg-black duration-500 transition-all text-gray-600 font-work cursor-crosshair; } 
  .full-ost article:hover .year{ @apply text-white; } 
  .full-ost article .year{ @apply pr-2; } 
  .full-ost article .title{ @apply text-xl text-white p-4; } 
  .full-ost article .label{ @apply text-sm italic text-white pl-2; }
  .full-ost article:hover .title {@apply px-8;} 

  @keyframes event-curtain {
    0% {
      width: 100%;
      height:100%;
    }
    100% {
      width: 0;
      height: 0;
    }
  }
</style>
<script>
  export default {
    data() {
      return {
        content: false,
        layout: 'list',
      }
    },
    methods: {
      afterEnter(el) {
        this.content = true
      },
      beforeLeave(el) {
        this.content = false
      },
      scrollAnimation() {
        this.$gsap.utils.toArray("article").forEach((e,i) => {
          var curtain = e.getElementsByClassName('curtain');
          this.$gsap.to(curtain, {width: '0%' , height: '100%' , duration: 0.2, ease:"power2.inOut", delay: '0.'+i});  

          var curtainEvent = this.$gsap.to(curtain, {width: '0%' , height: '100%' , duration: 0.5, ease:"power2.inOut", delay: '0.'+i});   
          this.$gsap.timeline({
            scrollTrigger: {
                trigger: e,
                start: "center bottom",
					    	end: "center top",
                invalidateOnRefresh: true,
                anticipatePin: 1,
                scrub: true,
                toggleActions: "play reverse play reverse",
                onEnterBack: e => {
                  curtainEvent.play();
                },
                onLeaveBack: e => {
                  curtainEvent.reverse();
                },
                onEnter: e => {
                  curtainEvent.play();
                },
                onLeave: e => {
                  curtainEvent.reverse();
                },
            }
          }).fromTo(e, {  y: 0, opacity: 1, ease: "power2.inOut"}, {  y: 0, opacity: 1, ease: "power2.inOut"});
        });
		  }
    },
    mounted() {
      this.scrollAnimation();
    }
  }
</script>
  